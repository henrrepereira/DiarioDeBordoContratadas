<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Relat√≥rio de Seguran√ßa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* PWA styles for offline functionality */
        .offline-indicator {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #ef4444;
            color: white;
            text-align: center;
            padding: 8px;
            z-index: 1000;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }
        .offline-indicator.show {
            transform: translateY(0);
        }
        
        /* Custom animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        /* Photo preview styles */
        .photo-preview {
            max-width: 200px;
            max-height: 200px;
            object-fit: cover;
            border-radius: 8px;
        }

        /* Modal styles */
        .modal-backdrop {
            backdrop-filter: blur(4px);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Offline Indicator -->
    <div id="offlineIndicator" class="offline-indicator">
        üì± Modo Offline - Dados ser√£o salvos localmente
    </div>

    <!-- Registration Screen -->
    <div id="registrationScreen" class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md fade-in">
            <div class="text-center mb-8">
                <div class="bg-green-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-white text-2xl">üìù</span>
                </div>
                <h1 class="text-2xl font-bold text-gray-800">Cadastro de Usu√°rio</h1>
                <p class="text-gray-600 mt-2">Crie sua conta no sistema</p>
            </div>
            
            <form id="registrationForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">CPF *</label>
                    <input type="text" id="cpf" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                           placeholder="000.000.000-00"
                           maxlength="14">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nome Completo *</label>
                    <input type="text" id="nomeCompleto" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                           placeholder="Digite seu nome completo">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Data de Nascimento *</label>
                    <input type="date" id="dataNascimento" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Empresa *</label>
                    <select id="empresaCadastro" required 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        <option value="">Selecione sua empresa</option>
                        <option value="VALE">VALE</option>
                        <option value="Empresa Terceirizada A">Empresa Terceirizada A</option>
                        <option value="Empresa Terceirizada B">Empresa Terceirizada B</option>
                        <option value="Consultoria de Seguran√ßa">Consultoria de Seguran√ßa</option>
                        <option value="Outra">Outra</option>
                    </select>
                </div>
                
                <div id="outraEmpresaField" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nome da Empresa</label>
                    <input type="text" id="outraEmpresa" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                           placeholder="Digite o nome da empresa">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Usu√°rio *</label>
                    <input type="text" id="usuarioCadastro" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                           placeholder="Escolha um nome de usu√°rio">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Senha *</label>
                    <input type="password" id="senhaCadastro" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                           placeholder="Crie uma senha segura"
                           minlength="6">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Confirmar Senha *</label>
                    <input type="password" id="confirmarSenha" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                           placeholder="Confirme sua senha"
                           minlength="6">
                </div>
                
                <div id="registrationError" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                </div>
                
                <div id="registrationSuccess" class="hidden bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm">
                    Cadastro realizado com sucesso! Redirecionando para o login...
                </div>
                
                <button type="submit" 
                        class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105">
                    Criar Conta
                </button>
                
                <div class="text-center">
                    <button type="button" onclick="showLogin()" 
                            class="text-blue-600 hover:text-blue-800 font-medium">
                        J√° tem uma conta? Fazer login
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="hidden min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md fade-in">
            <div class="text-center mb-8">
                <div class="bg-blue-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-white text-2xl">üõ°Ô∏è</span>
                </div>
                <h1 class="text-2xl font-bold text-gray-800">Relat√≥rio de Seguran√ßa</h1>
                <p class="text-gray-600 mt-2">Sistema Offline de Monitoramento</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Usu√°rio</label>
                    <input type="text" id="username" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           placeholder="Digite seu usu√°rio">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Senha</label>
                    <input type="password" id="password" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           placeholder="Digite sua senha">
                </div>
                
                <div id="loginError" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                    Usu√°rio ou senha incorretos. Tente novamente.
                </div>
                
                <button type="submit" 
                        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105">
                    Entrar no Sistema
                </button>
                
                <div class="text-center">
                    <button type="button" onclick="showRegistration()" 
                            class="text-green-600 hover:text-green-800 font-medium">
                        N√£o tem conta? Cadastre-se
                    </button>
                </div>
                
                <div class="text-center text-sm text-gray-600 mt-4">
                    <p><strong>Usu√°rios de demonstra√ß√£o:</strong></p>
                    <div class="text-xs space-y-1 mt-2">
                        <p>admin / admin123 (Administrador)</p>
                        <p>inspetor / insp456 (Inspetor de Seguran√ßa)</p>
                        <p>supervisor / super789 (Supervisor)</p>
                        <p>tst / tst123 (T√©cnico de Seguran√ßa)</p>
                        <p>coordenador / coord456 (Coordenador)</p>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="appScreen" class="hidden min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b">
            <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
                <div>
                    <h1 class="text-xl font-bold text-gray-800">Relat√≥rio de Seguran√ßa</h1>
                    <p class="text-sm text-gray-600" id="userInfo"></p>
                </div>
                <button onclick="logout()" class="text-blue-600 hover:text-blue-800 font-medium">
                    Sair
                </button>
            </div>
        </header>

        <!-- Form Container -->
        <div class="max-w-4xl mx-auto p-4">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-lg font-semibold text-gray-800 mb-6">Novo Relat√≥rio de Seguran√ßa</h2>
                
                <form id="reportForm" class="space-y-6">
                    <!-- Localiza√ß√£o e TST -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Localiza√ß√£o</label>
                            <input type="text" id="localizacao" required 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                   placeholder="Local da inspe√ß√£o">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">TST presente em campo?</label>
                            <select id="tstPresente" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="">Selecione</option>
                                <option value="sim">Sim</option>
                                <option value="nao">N√£o</option>
                            </select>
                        </div>
                    </div>

                    <!-- Aus√™ncias -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">1¬∫ dia da aus√™ncia</label>
                            <input type="date" id="primeiroDiaAusencia" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Dias ausente</label>
                            <input type="number" id="diasAusente" min="0" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                   placeholder="0">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Motivo</label>
                            <input type="text" id="motivo" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                   placeholder="Motivo da aus√™ncia">
                        </div>
                    </div>

                    <!-- N√∫meros de Inspe√ß√µes -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-medium text-gray-800 mb-4">N√∫meros de Inspe√ß√µes e A√ß√µes</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">N¬∫ Boa Jornada</label>
                                <input type="number" id="boaJornada" min="0" value="0" 
                                       class="w-full px-2 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">N¬∫ Inspe√ß√µes RAC</label>
                                <input type="number" id="inspecoesRAC" min="0" value="0" 
                                       class="w-full px-2 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">N¬∫ Inspe√ß√µes ART/PTS/OMVE</label>
                                <input type="number" id="inspecoesART" min="0" value="0" 
                                       class="w-full px-2 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">N¬∫ Outras Inspe√ß√µes</label>
                                <input type="number" id="outrasInspecoes" min="0" value="0" 
                                       class="w-full px-2 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">N¬∫ Interdi√ß√µes Cr√≠ticas</label>
                                <input type="number" id="interdicoesCriticas" min="0" value="0" 
                                       class="w-full px-2 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">N¬∫ N3 registrados</label>
                                <input type="number" id="n3Registrados" min="0" value="0" 
                                       class="w-full px-2 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">N¬∫ A√ß√µes Internas</label>
                                <input type="number" id="acoesInternas" min="0" value="0" 
                                       class="w-full px-2 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">N¬∫ A√ß√µes para VALE</label>
                                <input type="number" id="acoesVale" min="0" value="0" 
                                       class="w-full px-2 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>
                    </div>

                    <!-- Desvios -->
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h3 class="font-medium text-gray-800 mb-4">Desvios Cr√≠ticos</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Houve desvio cr√≠tico?</label>
                                <select id="houveDesvio" onchange="toggleDesvioFields()" 
                                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="nao">N√£o</option>
                                    <option value="sim">Sim</option>
                                </select>
                            </div>
                            
                            <div id="desvioFields" class="hidden space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de desvio</label>
                                        <select id="tipoDesvio" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                            <option value="">Selecione o tipo</option>
                                            <option value="equipamento">Equipamento</option>
                                            <option value="procedimento">Procedimento</option>
                                            <option value="comportamental">Comportamental</option>
                                            <option value="ambiental">Ambiental</option>
                                            <option value="outro">Outro</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Status da a√ß√£o</label>
                                        <select id="statusAcao" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                            <option value="pendente">Pendente</option>
                                            <option value="em-andamento">Em Andamento</option>
                                            <option value="concluida">Conclu√≠da</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Descri√ß√£o do desvio</label>
                                    <textarea id="descricaoDesvio" rows="3" 
                                              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                              placeholder="Descreva detalhadamente o desvio encontrado"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Local (seja detalhista)</label>
                                    <textarea id="localDesvio" rows="2" 
                                              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                              placeholder="Descreva exatamente onde ocorreu o desvio"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">A√ß√£o tomada/sugerida</label>
                                    <textarea id="acaoTomada" rows="3" 
                                              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                              placeholder="Descreva as a√ß√µes tomadas ou sugeridas para corre√ß√£o"></textarea>
                                </div>
                                
                                <!-- Fotos -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Foto do desvio</label>
                                        <input type="file" id="fotoDesvio" accept="image/*" capture="environment"
                                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <p class="text-xs text-gray-500 mt-1">N√£o fotografar rostos ou documentos</p>
                                        <div id="previewDesvio" class="mt-2"></div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Foto da solu√ß√£o</label>
                                        <input type="file" id="fotoSolucao" accept="image/*" capture="environment"
                                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <p class="text-xs text-gray-500 mt-1">Se houver solu√ß√£o implementada</p>
                                        <div id="previewSolucao" class="mt-2"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Buttons -->
                    <div class="flex flex-col sm:flex-row gap-3 pt-4">
                        <button type="submit" 
                                class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200">
                            üíæ Salvar Relat√≥rio
                        </button>
                        <button type="button" onclick="clearForm()" 
                                class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-200">
                            üóëÔ∏è Limpar Formul√°rio
                        </button>
                    </div>
                </form>
            </div>

            <!-- Saved Reports -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold text-gray-800">Relat√≥rios Salvos</h2>
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="exportReports()" 
                                class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium">
                            üì§ Exportar CSV
                        </button>
                        <button onclick="exportToGoogleSheets()" 
                                class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium">
                            üìä Google Sheets
                        </button>
                        <button onclick="showImportModal()" 
                                class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium">
                            üì• Importar
                        </button>
                        <button onclick="showBackupModal()" 
                                class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg text-sm font-medium">
                            üíæ Backup
                        </button>
                    </div>
                </div>
                <div id="savedReports" class="space-y-3">
                    <p class="text-gray-500 text-center py-8">Nenhum relat√≥rio salvo ainda</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="importModal" class="hidden fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800">üì• Importar Dados</h2>
                    <button onclick="closeImportModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                </div>
                
                <div class="space-y-6">
                    <!-- Import Users -->
                    <div class="border border-gray-200 rounded-lg p-4">
                        <h3 class="font-semibold text-gray-800 mb-3">üë• Importar Usu√°rios</h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Arquivo CSV de Usu√°rios</label>
                                <input type="file" id="importUsersFile" accept=".csv" 
                                       class="w-full px-<thinking>
The user has provided an HTML file for a safety report application and is asking to test it. The environment details indicate that there is only one file, `safety-report-app.html`, in the current working directory. Since there are not many files, I will proceed to read the contents of this file to understand its structure and functionality before testing it in a browser.
</thinking>

<read_file>
<path>safety-report-app.html</path>
</read_file>
